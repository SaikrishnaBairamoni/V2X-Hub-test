######## use this block to send message to V2X hub##################
####### The messages hit MessageReceiver Plugin first at port: 26789 ########
 
import socket
import binascii as ba
import time

udpip="127.0.0.1"
udpport=26789
 

sk = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
 
# sample MobilityOperation message
#txt="00F381741D59D4E2D43AB3A9C5A8C183060C183060C183060C183060B583060C16B060C182D60C18305AC183060C183060C183060C183060C183060C183060C183060C183036A72EB8F5C9DDCF865C7D34EFDCA5F6D3BAFEEEBB7165E4E98C6AB2A3C88959843990A83870E5B2CC787972D39795FDD876E5751A6C3A705054CB8F42CC987A65BFBF35FD9879F4BFCFA61E996FE9DDCF865C7D34EFDCE993064C173062B993059930F4CB7F7E6BFB30F3E97F0E4E77F1E1D9A7172C3D34EFDCE993064C173064B993059B34E3CBBB9E5BFC3661E995D449F516B160C183359DF2E9CFA3A3A6CD583060B31E1E5CB4E5E57F4E474C5670CBCB6E9E97F965E3D74F2CB91D59CBCD669E7CEFF3C7BF96574DDAACE1CB2DFE9CB4F0BF87273BFA32E1D9D345FC7A32E3D6EB965C8B30E4E77F465C3B3A68BFCFA61E9D79BA62B30E4E77F0F5E9BEFF3E987A75E6EB2EECF873E5C8B30E4E77F9EFCDD3BE1E596FF6CBCB9E9DFB9D43834A6C14143661E99B7F2DA83B335CCD7300"

# sample BSMs: select one for testing
#txt="001480CF4B950C400022D2666E923D1EA6D4E28957BD55FFFFF001C758FD7E67D07F7FFF8000000002020218E1C1004A40196FBC042210115C030EF1408801021D4074CE7E1848101C5C0806E8E1A50101A84056EE8A1AB4102B840A9ADA21B9010259C08DEE1C1C560FFDDBFC070C0222210018BFCE309623120FFE9BFBB10C8238A0FFDC3F987114241610009BFB7113024780FFAC3F95F13A26800FED93FDD51202C5E0FE17BF9B31202FBAFFFEC87FC011650090019C70808440C83207873800000000001095084081C903447E31C12FC0"
while True:
    txt="0014251d59d162dad7de266e9a7d1ea6d4220974ffffffff8ffff080fdfa1fa1007fff0000640fa0"
    unhexed = ba.unhexlify(txt)
    sk.sendto(unhexed,(udpip,udpport))
    print(f"sent message {txt}")
    time.sleep(0.01)

